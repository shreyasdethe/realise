(this.webpackJsonprealise=this.webpackJsonprealise||[]).push([[0],[,,,,function(e,t,n){},,,,function(e,t,n){e.exports=n(16)},,,,,function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";n.r(t);var a=n(0),o=n.n(a),c=n(5),r=n.n(c),l=(n(13),n(1)),s=(n(4),n(6)),i=(n(14),n(7)),u=(n(15),function(e){var t=e.chatJID,n=Object(a.useState)(""),c=Object(l.a)(n,2),r=c[0],s=c[1],u=Object(a.useState)(""),m=Object(l.a)(u,2),d=m[0],p=m[1];Object(a.useEffect)((function(){if(window.conn.addHandler(g,null,"message",null,null,null),window.conn.send(window.$pres().tree()),!window.localStorage.chat){var e=Object(i.a)({},t,{r:[],s:[]});window.localStorage.setItem("chat",JSON.stringify(e))}}),[]);var w=function(e,n){var a=JSON.parse(window.localStorage.chat);Object.keys(a).includes(t)?("r"===e?a[t].r.push(n):"s"===e&&a[t].s.push(n),window.localStorage.setItem("chat",JSON.stringify(a))):(a[t]={r:[],s:[]},window.localStorage.setItem("chat",JSON.stringify(a)))};Object(a.useEffect)((function(){w("r",r)}),[r]),Object(a.useEffect)((function(){w("s",d)}),[d]);var g=function(e){var t=e.getAttribute("type"),n=e.getElementsByTagName("body");if("chat"===t&&n.length>0){var a=n[0],o=window.Strophe.getText(a).toString();s(o),f("r",o)}return!0},f=function(e,t){var n=document.querySelector(".chats"),a=document.createElement("div");a.className="r"===e?"recdMsg":"sentMsg",a.innerText=t,n.appendChild(a)};return o.a.createElement("div",{className:"chat-container"},o.a.createElement("h1",{className:"buddy-title"},t),o.a.createElement("div",{className:"chats"}),o.a.createElement("div",{className:"send-msg"},o.a.createElement("form",{onSubmit:function(e){e.preventDefault();var n=e.target.querySelector("input").value,a=window.$msg({to:t,from:window.conn.jid,type:"chat"}).c("body",null,n);p(n),f("s",n),window.conn.send(window.$pres().tree()),window.conn.send(a.tree()),window.conn.flush(),e.target.querySelector("input").value=""}},o.a.createElement("input",{type:"text",placeholder:"Start typing..."}),o.a.createElement("button",{type:"submit"},"Send"))),o.a.createElement("button",{onClick:function(){e.setisNewChat(!1)}},"Back"))}),m=function(){var e=Object(a.useState)(window.conn.authenticated),t=Object(l.a)(e,2),n=t[0],c=t[1],r=Object(a.useState)(!1),i=Object(l.a)(r,2),m=i[0],d=i[1],p=Object(a.useState)(""),w=Object(l.a)(p,2),g=w[0],f=w[1],h=Object(a.useState)([]),S=Object(l.a)(h,2),b=S[0],E=S[1],v=function(e){f(e.target.innerHTML),d(!0)};return Object(a.useEffect)((function(){var e=window.localStorage;e.contacts||e.setItem("contacts","");var t=e.contacts.split("/");if(0===b.length&&E(t),!1===m){var n=document.querySelector(".contacts-list");n.innerHTML="";var a,o=Object(s.a)(b);try{for(o.s();!(a=o.n()).done;){var c=a.value;if(null!==c&&""!==c){var r=document.createElement("li");r.innerHTML=c,r.onclick=v,n.append(r)}}}catch(l){o.e(l)}finally{o.f()}}}),[b,m]),n?m?o.a.createElement(u,{chatJID:g,setisNewChat:d}):o.a.createElement("div",{className:"contacts-container"},o.a.createElement("h1",{className:"contacts-heading"},"Contacts"),o.a.createElement("ul",{className:"contacts-list"}),o.a.createElement("button",{className:"contacts-add-button",onClick:function(){var e=window.localStorage,t=prompt("Please enter new contact"),n=e.contacts,a=n.split("/");if(null!==t){if(a.includes(t))return void alert("Contact is already saved");e.setItem("contacts",n+t+"/")}a=e.contacts.split("/"),E(a)}},"Add Contacts"),o.a.createElement("button",{className:"contacts-add-button",style:{marginTop:"5px",color:"#f36363"},onClick:function(){window.conn.disconnect(),c(!1)}},"Logout")):null},d=function(){var e=Object(a.useState)("not-log"),t=Object(l.a)(e,2),n=t[0],c=t[1],r=Object(a.useState)(""),s=Object(l.a)(r,2),i=s[0],u=s[1],d=function(e){console.log(e),e===window.Strophe.Status.CONNECTING?(c("no-log"),u("Connecting...")):e===window.Strophe.Status.DISCONNECTED?(c("no-log"),u("Disconnected"),setTimeout((function(){u("")}),3e3)):e===window.Strophe.Status.DISCONNECTING?(c("no-log"),u("Disconnecting...")):e===window.Strophe.Status.CONNECTED?(c("log"),u("Connected successfully")):e===window.Strophe.Status.CONNFAIL?(c("fail"),u("Connection failed, check internet connection")):e===window.Strophe.Status.AUTHFAIL?(c("fail"),u("Authentication failed, check username and/or password")):c("no-log")};return"log"===n?o.a.createElement(m,null):o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:"container"},o.a.createElement("h1",{className:"greeting1"},"Realise!"),o.a.createElement("p",{style:{marginBottom:20}},"Please login to continue"),o.a.createElement("form",{onSubmit:function(e){e.preventDefault();var t=e.target.username.value,n=e.target.password.value,a=window.localStorage;if(0===a.length?(a.setItem("user",t),a.setItem("pass",n)):""!==a.getItem("user")&&""!==a.getItem("pass")?(t=a.getItem("user"),n=a.getItem("pass"),document.querySelectorAll(".inputField")[0].innerHTML=t,document.querySelectorAll(".inputField")[1].innerHTML=n):(a.setItem("user",t),a.setItem("pass",n)),!t||!n)return c("fail"),void u("No credentials saved. Fields cannot be empty");window.conn.connect(t,n,d)}},o.a.createElement("input",{type:"text",name:"username",placeholder:"username@xmpp.jp",autoComplete:"username",className:"inputField",onChange:function(){c("not-log"),u("")}}),o.a.createElement("input",{type:"password",name:"password",placeholder:"password",autoComplete:"current-password",className:"inputField",onChange:function(){c("not-log"),u("")}}),o.a.createElement("input",{type:"submit",className:"loginButton",value:"Login (or Autofill)"}),o.a.createElement("br",null),o.a.createElement("a",{href:"https://www.xmpp.jp/signup",target:"_blank",rel:"noopener noreferrer"},o.a.createElement("input",{type:"button",className:"loginButton",style:{backgroundColor:"#d5ccfc"},value:"Register"})))),o.a.createElement("div",{className:"login-fail"},i),o.a.createElement("footer",null,"Realise! \xa9 2020 github.com/shreyasdethe"))},p=function(){return o.a.createElement(d,null)};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(o.a.createElement(o.a.StrictMode,null,o.a.createElement(p,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}],[[8,1,2]]]);
//# sourceMappingURL=main.7768d26c.chunk.js.map